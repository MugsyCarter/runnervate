
<section>

     <div class="container">
 
                <button ng-if="$ctrl.nuke===true" class="btn btn-danger"  ng-click="$ctrl.deleteIncidents()" ><span class="glyphicon glyphicon-fire"><h6>Nuke Incients</h6></span></button>
                <button ng-if="$ctrl.nuke===true" class="btn btn-danger"  ng-click="$ctrl.populateDatabase()" ><span class="glyphicon glyphicon-book"><h6>Populate Incidents</h6></span></button>

                <button ng-if="$ctrl.nuke===true" class="btn btn-danger"  ng-click="$ctrl.populateDatabase()" ><span class="glyphicon glyphicon-book"><h6>Populate Incidents</h6></span></button>

                <button ng-if="$ctrl.nuke===true" class="btn btn-danger"  ng-click="$ctrl.populateDatabase()" ><span class="glyphicon glyphicon-book"><h6>Populate Incidents</h6></span></button>



        <!-- <div map-lazy-load="https://maps.google.com/maps/api/js" map-lazy-load-params="{{$ctrl.mapURL}}">
        <ng-map center="41,-87" zoom="3"></ng-map>
        </div> -->

        <h2>Browse Lynchings</h2>
        <div class="loader" ng-if="$ctrl.loading===true"></div>
        <!-- <div id="filters">
                <div class="jumbotron">
                        <label for="inputFilter" class="col-lg-1 control-label">Filter by </label>
                        <div class="col-lg-1">
                                <select ng-model="$ctrl.newQuery.category" ng-options="filter.name for filter in $ctrl.filters">
                                </select>
                        </div>
                        <div>
                                <div ng-if="$ctrl.newQuery.category.name==='county'" class="col-lg-2" >
                                        <select  ng-model="$ctrl.newQuery.target" ng-options="county for county in $ctrl.counties">
                                        </select>
                                </div>
                                <div ng-if="$ctrl.newQuery.category.name==='place'" class="col-lg-2">
                                        <input ng-model="$ctrl.newQuery.target" type="text" class="form-control" id="inputPlace" placeholder="Place">
                                </div>
                                <div class="col-lg-2" ng-if="$ctrl.newQuery.category.name==='year'">
                                        <input ng-model="$ctrl.newQuery.target" type="number" class="form-control" id="inputYear" min=1500 max=2100>
                                </div>
                        </div>
                        <button ng-if="$ctrl.newQuery.target!==null" class="btn btn-success"  ng-click="$ctrl.addFilter()" ><span class="glyphicon glyphicon-plus"><h6>Add</h6></span></button>

                </div>
        </div>

        <div class="jumbotron mb-3" ng-if="$ctrl.queries.length">
                <label for="inputFilter" class="col-lg-3 control-label">Active Filters: Click a Filter to Remove</label>
                <div class="col-lg-2" ng-repeat="query in $ctrl.queries" >
                        <button type='button' class="{{$ctrl.classes[query.number]}}" ng-click="$ctrl.removeFilter(query)">{{query.category.name}} is {{query.target}}</button>
                </div>
        </div> -->

        <div id="No Results Message" ng-if="$ctrl.incidents.length===0" class="panel-group">
                <h3>No Results Found</h3>
        </div>

        <div id="incident-gallery" ng-if="$ctrl.activeIncidents.length" class="container">
                <h3>{{$ctrl.incidentNumber}} Results Found</h3>
                <ul id="incident-list">
                        <li ng-repeat="incident in $ctrl.activeIncidents">
                                <div class="row">
                                        <!-- full container -->
                                        <div class="col-lg-11" id="incident-panel">
                                                <!-- title container -->
                                                <div  class="row">
                                                        <h3>{{incident.suspectNames}} accused of {{incident.crime}}.    Punishment: {{incident.punishment}}.</h3>
                                                </div>
                                                <!-- title container ends -->
                                                
                                                <!-- short view starts -->
                                                <div class="row" ng-hide="incident.fullView===true"> 
                                                        <button class="btn btn-primary" id="show-incident-button" ng-click="$ctrl.showIncident(incident)"><span class="glyphicon glyphicon-plus"><h6>Show More</h6></span></button>
                                                        <h4>{{incident.dateString}}.  {{incident.place}}, {{incident.county}} County {{incident.state}}</h4>
                                                        <p>{{incident.summary}} summary will go here</p>          
                                                </div>
                                                <!-- short view ends -->
                                                <!-- long view starts -->
        
        <div class="row" ng-if="incident.fullView===true">                                       
      <div class="jumbotron" id="big-incident">
                <h2>{{incident.dateString}}.  {{incident.place}}, {{incident.county}} County {{incident.state}}</h2>
                <!-- <p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p> -->
                <!-- <p><a class="btn btn-lg btn-success" href="#" role="button" ng-click="$ctrl.hideIncident(incident)" >Sign up today</a></p> -->
                <div class="row">
                        <div class="col-lg-10">
                                <ng-map class="small-map" center="{{incident.latDecimal}}, {{incident.lonDecimal}}" zoom="7" id="'map-' + {{incident._id}}">
                                        <marker position="{{incident.latDecimal}},{{incident.lonDecimal}}"/>
                                        
                                </ng-map>
                        </div>
                </div>
        </div>
              <div class="row marketing">
                <div class="col-lg-6">
                                <p>0{{incident.caseNum}}</p>
                                <p>1{{incident.incidentNotes}}</p>
                                <p>2{{incident.year}}</p>
                                <p>3{{incident.month}}</p>
                                <p>4{{incident.day}}</p>
                                <p>5{{incident.dateNotes}}</p>
                                <p>6{{incident.latDecimal}}</p>
                                <p>7{{incident.lonDecimal}}</p>
                                <p>8{{incident.latDegrees}}</p>
                                <p>9{{incident.latMinutes}}</p>
                                <p>10{{incident.latSeconds}}</p>
                                <p>11{{incident.lonDegrees}}</p>
                                <p>12{{incident.lonMinutes}}</p>
                                <p>13{{incident.lonSeconds}}</p>
                                <p>14{{incident.state}}</p>
                                <p>15{{incident.place}}</p>
                                <p>16{{incident.county}}</p>
                                <p>17{{incident.locationNotes}}</p>
                                <p>18{{incident.crowdType}}</p>
                                <p>19{{incident.crowdSize}}</p>
                                <p>20{{incident.open}}</p>
                                <p>21{{incident.authorities}}</p>
                                <p>22{{incident.authoritiesPresent}}</p>
                                <p>23{{incident.lethality}}</p>
                                <p>24{{incident.cwIndex}}</p>
                                <p>25{{incident.gdIndex}}</p>
                                <p>26{{incident.crossRefNotesCwGd}}</p>
                                <p>27{{incident.dateString}}</p>
                                <p>28{{incident.summary}}</p>



                        <h4>Accused</h4>
                        <p>Names: {{incident.suspectNames}}</p>
                        <p>Races: {{incident.suspectRaces}}</p>
                        <p>Confession or Speech at Gallows: {{incident.confession}}</p>
                        <p>Accused Notes: {{incident.suspectNotes}}</p>
                        <br>

                        <h4>Victim(s)</h4>
                        <p>Name(s): {{incident.victimNames}}</p>
                        <p>Gender(s): {{incident.victimGenders}}</p>
                        <p>Race(s): {{incident.victimRaces}}</p>
                        <p>Victim Notes: {{incident.victimNotes}}</p>
                </div>
        
                <div class="col-lg-6">
                        <h4>Lynching</h4>
                        <p>Crowd Type:  <em>{{incident.crowdType}}</em></p>
                        <p>Crowd Size: {{incident.crowdSize}}</p>
                        <p>Open or Secret?: {{incident.open}}</p>
                        <p>Authorities Present: {{incident.oldAuthorities}}</p>
                        <p>Crime: {{incident.crime}}</p>
                        <p>Punishment: {{incident.punishment}}</p>
                        <p>Lethality: {{incident.lethality}}</p>
                        <p>Other Names Mentioned: {{incident.otherNamesMentioned}}</p>
                        <br>

                        <h4>Sources</h4>  
                        <p>Sources:  <em>{{incident.oldSources}}</em></p>
                        <p>Notes:  <em>{{incident.oldNotes}}</em></p>
                </div>
              </div>
                        <button class="btn btn-success" id="hide-incident-button" ng-click="$ctrl.hideIncident(incident)" ><span class="glyphicon glyphicon-minus"><h6>Show Less</h6></span></button>
        </div>
<!-- 
                                                <div class="row">
                                                        <div class="col-sm-4"><h4>{{incident.dateString}}.  {{incident.place}}, {{incident.county}} County {{incident.state}}</h4>
                                                        </div>
                                                        <div class="col-sm-4">
                                                                <h4>Accused</h4>
                                                        </div>
                                                        <div class="col-sm-4">
                                                                <p>Names: {{incident.suspectNames}}</p>
                                                        </div>
                                                                <p>Races: {{incident.suspectRaces}}</p></div>
                                                                <br>
                                                                <p>Confession or Speech at Gallows: {{incident.confession}}</p>
                                                        </div>
                                                        <div class="col-sm-2"> <button class="btn btn-secondary" id="show-incident-button" ng-click="$ctrl.hideIncident(incident)" ><span class="glyphicon glyphicon-minus"><h6>Show Less</h6></span></button></div>
                                                        <div class="col-sm-4">
                                                                <ng-map class="small-map" center="{{incident.latDecimal}}, {{incident.lonDecimal}}" zoom="7">
                                                                        <marker position=“{{incident.latDecimal}},{{incident.lonDecimal}}”/>
                                                                        
                                                                </ng-map>
                                                        </div>
                                                        </div>
                                                        <div class="row">
                                                        <div class="col-sm-10">  
                                                                <p>{{incident.summary}} summary will go here</p>
                                                        </div>
                                                        </div> -->
                                                       

                                                        <!-- <div class="row">
                                                        <div class="col-sm-9">   
                                                                <h4>Accused</h4>
                                                        </div>
                                                        </div>  

                                                        <div class="row">               
                                                        <div class="col-sm-3"><p>Names: {{incident.suspectNames}}</p></div>
                                                        <div class="col-sm-3"> <p>Races: {{incident.suspectRaces}}</p></div>
                                                        <div class="col-sm-3"><p>Confession or Speech at Gallows: {{incident.confession}}</p>
                                                         </div> -->
                                                             
                                                         <!-- <div class="row">
                                                        <div class="col-sm-9">   
                                                                <p>Accused Notes: {{incident.suspectNotes}}</p>
                                                        </div>
                                                        </div>   -->

                                                        <!-- <div class="row">
                                                        <div class="col-sm-10">   
                                                                <h4>Victims</h4>
                                                        </div>
                                                        </div>             
                                                        
                                                        <div class="row">
                                                        <div class="col-sm-3">   
                                                                <p>Names: {{incident.victimNames}}</p>
                                                        </div>
                                                        <div class="col-sm-3">   
                                                                <p>Genders: {{incident.victimGenders}}</p>
                                                        </div>
                                                        <div class="col-sm-3">   
                                                                <p>Races: {{incident.victimRaces}}</p>
                                                        </div>
                                                        </div>     
                                                        
                                                        <div class="row">
                                                        <div class="col-sm-10">   
                                                                <p>Victim Notes: {{incident.victimNotes}}</p>
                                                        </div>
                                                        </div>  -->
                                                
                                                        <!-- <div class="row">
                                                        <div class="col-sm-10">   
                                                                <h4>Lynching</h4>
                                                        </div>
                                                        </div> 

                                                        <div class="row">
                                                        <div class="col-sm-3">   
                                                                <p>Crowd Type:  <em>{{incident.crowdType}}</em></p>
                                                        </div>
                                                        <div class="col-sm-3">   
                                                                <p>Crowd Size: {{incident.crowdSize}}</p>
                                                        </div>
                                                        <div class="col-sm-3">   
                                                                <p>Open or Closed?: {{incident.open}}</p>
                                                        </div>
                                                        </div>  

                                                        <div class="row">
                                                        <div class="col-sm-3">   
                                                                <p>Authorities Present: {{incident.oldAuthorities}}</p>
                                                        </div>
                                                        <div class="col-sm-3">   
                                                                <p>Crime: {{incident.crime}}</p>
                                                        </div>
                                                        <div class="col-sm-3">   
                                                                <p>Punishment: {{incident.punishment}}</p>
                                                        </div>
                                                        </div>

                                                        <div class="row">
                                                        <div class="col-sm-3">   
                                                                <p>Lethality: {{incident.lethality}}</p>
                                                        </div>
                                                        <div class="col-sm-6">   
                                                                <p>Other Names Mentioned: {{incident.otherNamesMentioned}}</p>
                                                        </div>
                                                        </div> -->

                                                        <div class="row" ng-if="$ctrl.user.role=='admin' || $ctrl.user.role=='contributor'">
                                                                <div class="row">
                                                                <div class="col-sm-10">   
                                                                        <h4>Database Indices</h4>
                                                                </div>
                                                                </div> 

                                                                <h4>Database Indices</h4>
                                                                <div class="row">
                                                                <div class="col-sm-3">   
                                                                        <p>Case Number:  <em>{{incident.caseNum}}</em></p>
                                                                </div>
                                                                <div class="col-sm-3">   
                                                                        <p>Current Database ID:  <em>{{incident._id}}</em></p>
                                                                </div>
                                                                <div class="col-sm-3">   
                                                                        <p>Original Database Index: {{incident.origDBIndex}}</p>
                                                                </div>
                                                                </div>
                                                                
                                                                <div class="row">
                                                                <div class="col-sm-3">   
                                                                        <p>C-W Index: {{incident.cwIndex}}</p>
                                                                </div>
                                                                <div class="col-sm-3">   
                                                                        <p>G-D Index: {{incident.gdIndex}}</p>
                                                                </div>
                                                                <div class="col-sm-3">   
                                                                        <p>Original Database Index: {{incident.origDBIndex}}</p>
                                                                </div>
                                                                </div>
                                                               
                                                                <div class="row">
                                                                <div class="col-sm-10">   
                                                                        <p>Index Notes: {{incident.crossRefNotesCwGd}}</p>
                                                                </div>
                                                                </div> 
                                                        </div>


                                                        <!-- <div class="row">
                                                        <div class="col-sm-10">   
                                                                <h4>Sources</h4>
                                                        </div>
                                                        </div> 


                                                        <div class="row">
                                                        <div class="col-sm-10">   
                                                                <p>Sources:  <em>{{incident.oldSources}}</em></p>
                                                        </div>
                                                        </div> 

                                                        <div class="row">
                                                        <div class="col-sm-10">   
                                                                <p>Notes:  <em>{{incident.oldNotes}}</em></p>
                                                        </div>
                                                        </div>  -->


                                                        <button class="btn btn-warning" id="edit-incident-button" ng-if="$ctrl.user.role=='admin'" ng-click="$ctrl.editIncident(incident)" ><span class="glyphicon glyphicon-wrench"><h6>Edit Incident</h6></span></button>
                                                        <button class="btn btn-danger" id="delete-incident-button" ng-if="$ctrl.user.role=='admin'" ng-click="$ctrl.deleteIncident(incident)" ><span class="glyphicon glyphicon-trash"><h6>Delete Incident</h6></span></button>

                                                        <button class="btn btn-warning" id="edit-incident-button" ng-if="$ctrl.user.role=='contributor'" ng-click="$ctrl.editIncident(incident)" ><span class="glyphicon glyphicon-wrench"><h6>Propose Edits to incident</h6></span></button>
                                                        <button class="btn btn-danger" id="delete-incident-button" ng-if="$ctrl.user.role=='contributor'" ng-click="$ctrl.proposeDeletion(incident)" ><span class="glyphicon glyphicon-trash"><h6>Propose Delete Incident</h6></span></button>

        <!-- latDecimal}}</p>
        lonDecimal}}</p>
        latNDegrees:Number,
        latNMinutes:Number,
        latNSeconds:Number,
        lonWDegrees:Number,
        lonWMinutes:Number,
        lonWSeconds:Number,
        year: requiredNumber,
        month}}</p>
        day}}</p>
        dateNotes}}</p>,
        state}}</p>,
        place}}</p>,
        county}}</p>,
        locationNotes}}</p>, -->
                                                <!-- long view ends -->
                                                </div>
                                        </div>
                                        <!-- full container ends -->
                                </div>
                                
                        </li>
                </ul>
        </div>
</div> 

        <div id="search-results-footer" class="jumbotron" ng-if="$ctrl.incidents.length>0">
                <div class="panel-md-10">
                        <button class="btn btn-info" ng-if="$ctrl.minResult>9" ng-click="$ctrl.previousResults()"><span class="glyphicon glyphicon-arrow-left"><h6>Previous</h6></button>
                        <button class="btn btn-info" ng-if="$ctrl.maxResult<$ctrl.incidentNumber" ng-click="$ctrl.nextResults()"><span class="glyphicon glyphicon-arrow-right"><h6>Next</h6></button>
                        <span>Results {{$ctrl.minResult}}-{{$ctrl.maxResult}}</span>
                        <span> (of {{$ctrl.incidentNumber}})</h3>
                </div>
        </div>
              
</section>